<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PWA KalendÃ¡Å™</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
</head>

<body>

  <div id="app-wrapper">

    <!-- âœ… SCREEN: KalendÃ¡Å™ -->
    <div id="calendar-screen" class="screen active">

      <div class="calendar-container">
        <div id="calendar-header">        
          <h1 id="month-year"></h1>
        </div>

        <div class="calendar-weekdays">
          <div>Po</div>
          <div>Ãšt</div>
          <div>St</div>
          <div>ÄŒt</div>
          <div>PÃ¡</div>
          <div>So</div>
          <div>Ne</div>
        </div>

        <div class="calendar-grid" id="calendar">
          <!-- buÅˆky se generujÃ­ skriptem -->
        </div>

        <!-- Panel s informacemi o vybranÃ©m dni (vloÅ¾en do scrollable containeru, pod grid) -->
        <div id="day-info-panel" class="info-panel hidden">
          <div class="info-row info-header"><strong id="info-header">&nbsp;</strong></div>
          <div class="info-row"><strong>Celkem odpracovanÃ© hodiny:</strong> <span id="info-total">â€”</span></div>
          <div class="info-row small"><em>minut:</em> <span id="info-total-minutes">â€”</span></div>
          <div class="info-row small"><em id="info-holiday"></em></div>
          <div class="info-row"><strong>NormÃ¡lnÃ­ hodiny:</strong> <span id="info-hours">â€”</span> <span id="hours-shift-info"></span></div>
          <div class="info-row"><strong>PÅ™esÄasy:</strong> <span id="info-overtime">â€”</span> <span id="overtime-shift-info"></span></div>
          <div class="info-row"><strong>PoznÃ¡mka:</strong> <span id="info-note">â€”</span></div>
        </div>

      </div>
    </div>

    <!-- âœ… SCREEN: NastavenÃ­ -->
    <div id="settings-screen" class="screen">

  <header class="settings-header">
      <h2>NastavenÃ­ <span id="app-version">v1.50</span></h2>
  </header>

  <div class="tab-content">
    <!-- ObecnÃ© nastavenÃ­ -->
    <div id="general" class="tab-pane active">
      
      <!-- Motiv -->
      <section class="settings-section">
        <h3>Motiv zobrazenÃ­</h3>
        <div class="segmented-control" id="theme-control">
          <button data-value="light" class="active">ğŸŒ SvÄ›tlÃ½</button>
          <button data-value="dark">ğŸŒ™ TmavÃ½</button>
        </div>
      </section>

      <!-- SmÄ›na -->
      <section class="settings-section">
        <h3>SmÄ›na</h3>
        <div class="segmented-control" id="shift-control">
          <button data-value="A">A</button>
          <button data-value="B">B</button>
          <button data-value="C">C</button>
          <button data-value="D">D</button>
          <button data-value="R">R</button>
        </div>
      </section>

      <!-- Reset dat -->
      <section class="settings-section">
        <h3>Data</h3>
        <button id="btn-backup-manual">ğŸ’¾ VytvoÅ™it zÃ¡lohu nynÃ­</button>
        <p class="muted small">VytvoÅ™Ã­ zÃ¡lohu a nabÃ­dne ji ke staÅ¾enÃ­.</p>
        <button id="btn-restore-from-file">ğŸ“¥ Obnovit ze zÃ¡lohy</button>
        <p class="muted small">Vybere zÃ¡lohu ze souboru a ihned obnovÃ­ data.</p>
        <input type="file" id="backup-file-input" accept=".json" style="display: none;">
        <p id="last-backup-info" class="backup-info"></p>
        <button id="btn-reset-data">Resetovat data</button>
        <p class="muted">VymaÅ¾e vÅ¡echna uloÅ¾enÃ¡ data (IndexedDB + vybranÃ© poloÅ¾ky localStorage).</p>
      </section>

      <!-- NÃ¡povÄ›da -->
      <section class="settings-section">
        <h3>NÃ¡povÄ›da</h3>
        <button id="btn-show-manual">ğŸ“– Zobrazit nÃ¡vod k pouÅ¾itÃ­</button>
      </section>
    </div>
  </div>

  <div class="settings-footer">
    <button id="btn-settings-cancel">Cancel</button>
    <button id="btn-settings-ok">OK</button>
  </div>
</div>

  <!-- Obrazovka editace hodin vybranÃ©ho dne -->
<div id="edit-screen" class="screen">
  
  <header class="edit-header">
    <h2>Editace dne</h2>
  </header>

  <!-- ZobrazenÃ­ vybranÃ©ho dne -->
  <div id="selected-day" class="edit-day-info">
    <span id="selected-date"></span>
    <span id="selected-shift"></span>
  </div>

  <form id="hours-form" class="hours-form">
    <!-- NormÃ¡lnÃ­ hodiny + SmÄ›na -->
    <div class="form-grid">
      <div class="form-group">
        <label for="day-hours">NormÃ¡lnÃ­ hodiny:</label>
        <input type="number" step="0.5" min="0" id="day-hours" value="7.5">
      </div>
      <div class="form-group">
        <label for="day-shift-hours">SmÄ›na:</label>
        <select id="day-shift-hours">
          <option value="ranni">RannÃ­</option>
          <option value="odpoledni">OdpolednÃ­</option>
          <option value="nocni">NoÄnÃ­</option>
          <option value="volno">Volno</option>
          <option value="dovolena">DovolenÃ¡</option>
          <option value="nemoc">Nemoc</option>
          <option value="nahr">NÃ¡hradnÃ­ volno</option>
        </select>
      </div>
    </div>

    <!-- PÅ™esÄas + SmÄ›na -->
    <div class="form-grid">
      <div class="form-group">
        <label for="day-overtime">PÅ™esÄas:</label>
        <input type="number" step="0.5" min="0" id="day-overtime" value="0">
      </div>
      <div class="form-group">
        <label for="day-shift-overtime">SmÄ›na:</label>
        <select id="day-shift-overtime">
          <option value="ranni">RannÃ­</option>
          <option value="odpoledni">OdpolednÃ­</option>
          <option value="nocni">NoÄnÃ­</option>
        </select>
      </div>
    </div>

    <!-- PoznÃ¡mka -->
    <div class="form-group">
      <label for="day-note">PoznÃ¡mka k dni:</label>
      <textarea id="day-note" rows="3" placeholder="ZapiÅ¡te poznÃ¡mku..."></textarea>
    </div>
  </form>

  <div class="edit-footer">
    <button type="button" id="btn-cancel">Cancel</button>
    <button type="submit" id="btn-ok">OK</button>
  </div>
</div>

  <!-- âœ… SCREEN: PDF NÃ¡hled -->
  <!-- âœ… SCREEN: VÃ½plata -->
  <div id="salary-screen" class="screen">
    <header class="salary-header">
      <h2>ğŸ’° VÃ½plata</h2>
    </header>
    
    <div class="salary-content">
      <div class="salary-section">
        <label for="salary-class">PlatovÃ¡ tÅ™Ã­da:</label>
        <select id="salary-class">
          <option value="">--</option>
          <option value="1.1">1.1</option>
          <option value="2.1">2.1</option>
          <option value="2.2">2.2</option>
          <option value="2.3">2.3</option>
          <option value="3.1">3.1</option>
          <option value="3.2">3.2</option>
          <option value="3.3">3.3</option>
          <option value="4.1">4.1</option>
          <option value="4.2">4.2</option>
          <option value="4.3">4.3</option>
          <option value="5.1">5.1</option>
          <option value="5.2">5.2</option>
          <option value="5.3">5.3</option>
          <option value="6.1">6.1</option>
          <option value="6.2">6.2</option>
          <option value="6.3">6.3</option>
          <option value="7.1">7.1</option>
        </select>
      </div>
      
      <div class="salary-section">
        <label for="salary-ppu">PPÃš (KÄ/hod):</label>
        <input type="number" id="salary-ppu" step="0.01" min="0" placeholder="0.00">
      </div>
      
      <div class="salary-section">
        <label for="salary-union">Odbory?</label>
        <select id="salary-union">
          <option value="">--</option>
          <option value="ano">Ano</option>
          <option value="ne">Ne</option>
        </select>
      </div>
      
      <div class="salary-section">
        <label for="salary-premie">Odhad prÃ©miÃ­ celkem:</label>
        <input type="number" id="salary-premie" step="1" min="0" placeholder="0">
      </div>
      
      <div class="salary-section">
        <label for="salary-penzijni">PenzijnÃ­ pÅ™ipojiÅ¡tÄ›nÃ­:</label>
        <input type="number" id="salary-penzijni" step="1" min="0" placeholder="2300" value="2300">
      </div>
      
      <button id="btn-recap-month" class="salary-button">ğŸ“„ Rekapitulace mÄ›sÃ­ce</button>
      <button id="btn-preview-salary" class="salary-button">ğŸ‘ï¸ NÃ¡hled vÃ½platy</button>
    </div>
    
    <div class="salary-footer">
      <button type="button" id="btn-salary-back">â¬…ï¸ ZpÄ›t</button>
    </div>
  </div>

  <!-- âœ… SCREEN: NÃ¡hled vÃ½platy -->
  <div id="salary-preview-screen" class="screen">
    <header class="salary-preview-header">
      <h2>ğŸ‘ï¸ NÃ¡hled vÃ½platy <span id="salary-preview-month"></span></h2>
    </header>
    
    <div class="salary-preview-content">
      <table class="payslip-table">
        <thead>
          <tr>
            <th class="col-name">MzdovÃ¡ sloÅ¾ka</th>
            <th class="col-count">PoÄet</th>
            <th class="col-rate">Sazba</th>
            <th class="col-amount">ÄŒÃ¡stka</th>
          </tr>
        </thead>
        <tbody id="payslip-body">
          <!-- Generuje se v JS -->
        </tbody>
      </table>
    </div>
    
    <div class="salary-preview-footer">
      <button type="button" id="btn-salary-preview-back">â¬…ï¸ ZpÄ›t</button>
    </div>
  </div>

  <div id="pdf-preview-screen" class="screen">
    <header class="pdf-preview-header">
      <h2>NÃ¡hled PDF</h2>
    </header>
    
    <div id="pdf-preview-content" class="pdf-preview-content">
      <!-- Obsah se vygeneruje JS -->
    </div>
    
    <div class="pdf-preview-footer">
      <button type="button" id="btn-pdf-back">â¬…ï¸ ZpÄ›t</button>
      <button type="button" id="btn-pdf-save">ğŸ’¾ UloÅ¾it PDF</button>
    </div>
  </div>

  <!-- âœ… SCREEN: ManuÃ¡l -->
  <div id="manual-screen" class="screen">
    <header class="manual-header">
      <h2>ğŸ“– NÃ¡vod k pouÅ¾itÃ­</h2>
    </header>
    
    <div id="manual-content" class="manual-content">
      <!-- Obsah se naÄte JS -->
    </div>
    
    <div class="manual-footer">
      <button type="button" id="btn-manual-back">â¬…ï¸ ZpÄ›t</button>
    </div>
  </div>

  <!-- SkrytÃ½ element pro export PDF (bez CSS omezenÃ­ na vÃ½Å¡ku) -->
  <div id="pdf-export-container" style="display: none; position: absolute; left: -9999px; width: 100%; overflow: visible;">
    <div id="pdf-export-content"></div>
  </div>
  </div> <!-- âœ… konec wrapperu -->

  <!-- âœ… AkÄnÃ­ liÅ¡ta dole -->
<div class="action-bar">
  <button id="btn-settings">âš™ï¸</button>
  <button id="btn-salary">ğŸ’µ</button>
  <button id="btn-hours">ğŸ•’</button>
  <button id="btn-edit">âœï¸</button>
  <button id="btn-today">ğŸ“…</button>
  <button id="btn-prev">â¬…ï¸</button>
  <button id="btn-next">â¡ï¸</button>
</div>

  <script src="js/html2pdf.bundle.min.js"></script>
  <script src="script.js"></script>
</body>
</html>